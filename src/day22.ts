type Reindeer = 'ğŸ’¨' | 'ğŸ’ƒ' | 'ğŸ¦Œ' | 'ğŸŒŸ' | 'â˜„ï¸' | 'â¤ï¸' | 'ğŸŒ©ï¸' | 'âš¡' | 'ğŸ”´';

type Section = [
  Reindeer,
  Reindeer,
  Reindeer,
  Reindeer,
  Reindeer,
  Reindeer,
  Reindeer,
  Reindeer,
  Reindeer,
];

type Sodoku = [
  [[Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer]],
  [[Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer]],
  [[Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer]],
  [[Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer]],
  [[Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer]],
  [[Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer]],
  [[Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer]],
  [[Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer]],
  [[Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer], [Reindeer, Reindeer, Reindeer]],
];

type FilterArray<T extends unknown[], U> = T extends [infer Head, ...infer Tail]
  ? Head extends U
    ? [Head, ...FilterArray<Tail, U>]
    : FilterArray<Tail, U>
  : [];

type FlattenArray<TList extends unknown[]> = TList extends [
  infer IFirst extends unknown[],
  ...infer IRest,
]
  ? [...IFirst, ...FlattenArray<IRest>]
  : [];

type FlattenRows<T extends Sodoku> = { [K in keyof T]: FlattenArray<T[K]> };

type GetColumn<T extends Sodoku, K extends number> = FlattenRows<T> extends infer IFlattenedRows
  ? IFlattenedRows extends Section[]
    ? {
        [L in keyof IFlattenedRows]: K extends keyof IFlattenedRows[L]
          ? IFlattenedRows[L][K]
          : never;
      }
    : never
  : never;

type ValidateSection<T extends Section> = {
  [K in Reindeer]: FilterArray<T, K>['length'] extends 1 ? true : false;
}[Reindeer] extends true
  ? true
  : false;

type ValidateRows<T extends Sodoku> = {
  [K in keyof T]: ValidateSection<FlattenArray<T[K]>>;
}[number] extends true
  ? true
  : false;

type ValidateColumns<T extends Sodoku> = {
  [K in keyof T]: K extends `${infer A extends number}` ? ValidateSection<GetColumn<T, A>> : never;
}[number] extends true
  ? true
  : false;

type ValidateRegions<T extends Sodoku> = ValidateRows<
  [
    [T[0][0], T[1][0], T[2][0]],
    [T[3][0], T[4][0], T[5][0]],
    [T[6][0], T[7][0], T[8][0]],
    [T[0][1], T[1][1], T[2][1]],
    [T[3][1], T[4][1], T[5][1]],
    [T[6][1], T[7][1], T[8][1]],
    [T[0][2], T[1][2], T[2][2]],
    [T[3][2], T[4][2], T[5][2]],
    [T[6][2], T[7][2], T[8][2]],
  ]
>;

type Validate<T extends Sodoku> = ValidateRows<T> extends true
  ? ValidateColumns<T> extends true
    ? ValidateRegions<T> extends true
      ? true
      : false
    : false
  : false;

/************************** TESTS **************************/
import { Equal, Expect } from 'type-testing';

type test_sudoku_1_actual = Validate<
  [
    //   ^?
    [['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´']],
    [['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸']],
    [['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ']],
    [['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ'], ['âš¡', 'â˜„ï¸', 'â¤ï¸'], ['ğŸ”´', 'ğŸŒ©ï¸', 'ğŸŒŸ']],
    [['ğŸŒ©ï¸', 'ğŸ”´', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ'], ['âš¡', 'â˜„ï¸', 'â¤ï¸']],
    [['âš¡', 'â˜„ï¸', 'â¤ï¸'], ['ğŸŒ©ï¸', 'ğŸ”´', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ']],
    [['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨'], ['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸'], ['ğŸŒ©ï¸', 'ğŸ”´', 'âš¡']],
    [['ğŸ”´', 'ğŸŒ©ï¸', 'âš¡'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨'], ['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸']],
    [['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸'], ['ğŸ”´', 'ğŸŒ©ï¸', 'âš¡'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨']],
  ]
>;
type test_sudoku_1 = Expect<Equal<test_sudoku_1_actual, true>>;

type test_sudoku_2_actual = Validate<
  [
    //   ^?
    [['ğŸŒ©ï¸', 'ğŸ’¨', 'â˜„ï¸'], ['ğŸŒŸ', 'ğŸ¦Œ', 'âš¡'], ['â¤ï¸', 'ğŸ”´', 'ğŸ’ƒ']],
    [['ğŸŒŸ', 'âš¡', 'â¤ï¸'], ['ğŸ”´', 'ğŸ’ƒ', 'â˜„ï¸'], ['ğŸŒ©ï¸', 'ğŸ’¨', 'ğŸ¦Œ']],
    [['ğŸ”´', 'ğŸ¦Œ', 'ğŸ’ƒ'], ['ğŸ’¨', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'â˜„ï¸']],
    [['â¤ï¸', 'â˜„ï¸', 'ğŸŒ©ï¸'], ['ğŸ’ƒ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ¦Œ', 'ğŸŒŸ']],
    [['ğŸ¦Œ', 'ğŸ’ƒ', 'âš¡'], ['ğŸŒ©ï¸', 'ğŸŒŸ', 'ğŸ’¨'], ['ğŸ”´', 'â˜„ï¸', 'â¤ï¸']],
    [['ğŸ’¨', 'ğŸŒŸ', 'ğŸ”´'], ['ğŸ¦Œ', 'â˜„ï¸', 'â¤ï¸'], ['âš¡', 'ğŸ’ƒ', 'ğŸŒ©ï¸']],
    [['â˜„ï¸', 'ğŸ”´', 'ğŸ’¨'], ['â¤ï¸', 'ğŸŒ©ï¸', 'ğŸ¦Œ'], ['ğŸ’ƒ', 'ğŸŒŸ', 'âš¡']],
    [['ğŸ’ƒ', 'â¤ï¸', 'ğŸ¦Œ'], ['âš¡', 'ğŸ”´', 'ğŸŒŸ'], ['â˜„ï¸', 'ğŸŒ©ï¸', 'ğŸ’¨']],
    [['âš¡', 'ğŸŒ©ï¸', 'ğŸŒŸ'], ['â˜„ï¸', 'ğŸ’¨', 'ğŸ’ƒ'], ['ğŸ¦Œ', 'â¤ï¸', 'ğŸ”´']],
  ]
>;
type test_sudoku_2 = Expect<Equal<test_sudoku_2_actual, true>>;

type test_sudoku_3_actual = Validate<
  [
    //   ^?
    [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
    [['ğŸŒŸ', 'âš¡', 'ğŸ’¨'], ['â¤ï¸', 'ğŸ’ƒ', 'ğŸ”´'], ['â˜„ï¸', 'ğŸŒ©ï¸', 'ğŸ¦Œ']],
    [['â˜„ï¸', 'ğŸŒ©ï¸', 'â¤ï¸'], ['âš¡', 'ğŸŒŸ', 'ğŸ¦Œ'], ['ğŸ’ƒ', 'ğŸ”´', 'ğŸ’¨']],
    [['ğŸŒ©ï¸', 'ğŸ’ƒ', 'ğŸ”´'], ['ğŸ¦Œ', 'ğŸ’¨', 'âš¡'], ['ğŸŒŸ', 'â˜„ï¸', 'â¤ï¸']],
    [['â¤ï¸', 'â˜„ï¸', 'âš¡'], ['ğŸ’ƒ', 'ğŸŒ©ï¸', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ”´']],
    [['ğŸ’¨', 'ğŸŒŸ', 'ğŸ¦Œ'], ['â˜„ï¸', 'ğŸ”´', 'â¤ï¸'], ['ğŸŒ©ï¸', 'ğŸ’ƒ', 'âš¡']],
    [['ğŸ’ƒ', 'ğŸ’¨', 'ğŸŒŸ'], ['ğŸ”´', 'ğŸ¦Œ', 'â˜„ï¸'], ['â¤ï¸', 'âš¡', 'ğŸŒ©ï¸']],
    [['ğŸ”´', 'â¤ï¸', 'â˜„ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸŒ©ï¸'], ['ğŸ’¨', 'ğŸ¦Œ', 'ğŸ’ƒ']],
    [['âš¡', 'ğŸ¦Œ', 'ğŸŒ©ï¸'], ['ğŸ’¨', 'â¤ï¸', 'ğŸ’ƒ'], ['ğŸ”´', 'ğŸŒŸ', 'â˜„ï¸']],
  ]
>;
type test_sudoku_3 = Expect<Equal<test_sudoku_3_actual, true>>;

type test_sudoku_4_actual = Validate<
  [
    //   ^?
    [['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´']],
    [['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸']],
    [['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ']],
    [['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ'], ['âš¡', 'â˜„ï¸', 'â¤ï¸'], ['ğŸ”´', 'ğŸŒ©ï¸', 'ğŸŒŸ']],
    [['ğŸŒ©ï¸', 'ğŸ”´', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ'], ['âš¡', 'â˜„ï¸', 'â¤ï¸']],
    [['âš¡', 'â˜„ï¸', 'â¤ï¸'], ['ğŸŒ©ï¸', 'ğŸ”´', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ']],
    [['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨'], ['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸'], ['âš¡', 'ğŸ”´', 'ğŸŒŸ']],
    [['ğŸ”´', 'ğŸŒ©ï¸', 'âš¡'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨'], ['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸']],
    [['â¤ï¸', 'ğŸŒŸ', 'â˜„ï¸'], ['ğŸ”´', 'ğŸŒ©ï¸', 'âš¡'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'ğŸ’¨']],
  ]
>;
type test_sudoku_4 = Expect<Equal<test_sudoku_4_actual, false>>;

type test_sudoku_5_actual = Validate<
  [
    //   ^?
    [['ğŸŒ©ï¸', 'ğŸ’¨', 'â˜„ï¸'], ['ğŸŒŸ', 'ğŸ¦Œ', 'âš¡'], ['â¤ï¸', 'ğŸ”´', 'ğŸ’ƒ']],
    [['ğŸŒŸ', 'âš¡', 'â¤ï¸'], ['ğŸ”´', 'ğŸ’ƒ', 'â˜„ï¸'], ['ğŸŒ©ï¸', 'ğŸ’¨', 'ğŸ¦Œ']],
    [['ğŸ”´', 'ğŸ¦Œ', 'ğŸ’ƒ'], ['ğŸ’¨', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'â˜„ï¸']],
    [['â¤ï¸', 'â˜„ï¸', 'ğŸŒ©ï¸'], ['ğŸ’ƒ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ¦Œ', 'ğŸŒŸ']],
    [['ğŸ¦Œ', 'ğŸ’ƒ', 'âš¡'], ['ğŸŒ©ï¸', 'ğŸŒŸ', 'ğŸ’¨'], ['ğŸ”´', 'â˜„ï¸', 'â¤ï¸']],
    [['ğŸ’¨', 'ğŸŒŸ', 'ğŸ”´'], ['ğŸ¦Œ', 'â˜„ï¸', 'â¤ï¸'], ['âš¡', 'ğŸ’ƒ', 'ğŸŒ©ï¸']],
    [['â˜„ï¸', 'ğŸ”´', 'ğŸ’¨'], ['â¤ï¸', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['ğŸ’ƒ', 'ğŸŒŸ', 'âš¡']],
    [['ğŸ’ƒ', 'â¤ï¸', 'ğŸ¦Œ'], ['âš¡', 'ğŸ”´', 'ğŸŒŸ'], ['â˜„ï¸', 'ğŸŒ©ï¸', 'ğŸ’¨']],
    [['âš¡', 'ğŸŒ©ï¸', 'ğŸŒŸ'], ['â˜„ï¸', 'ğŸ’¨', 'ğŸ’ƒ'], ['ğŸ¦Œ', 'â¤ï¸', 'ğŸ”´']],
  ]
>;
type test_sudoku_5 = Expect<Equal<test_sudoku_5_actual, false>>;

type test_sudoku_6_actual = Validate<
  [
    //   ^?
    [['âš¡', 'ğŸ”´', 'ğŸŒ©ï¸'], ['ğŸ¦Œ', 'â¤ï¸', 'ğŸ’¨'], ['ğŸ’¨', 'ğŸŒŸ', 'â˜„ï¸']],
    [['â¤ï¸', 'ğŸ¦Œ', 'ğŸŒŸ'], ['ğŸ’¨', 'ğŸŒŸ', 'ğŸ”´'], ['ğŸ’ƒ', 'âš¡', 'ğŸŒ©ï¸']],
    [['ğŸ’¨', 'ğŸ’ƒ', 'ğŸŒŸ'], ['â˜„ï¸', 'âš¡', 'ğŸŒ©ï¸'], ['ğŸ”´', 'â¤ï¸', 'ğŸ¦Œ']],
    [['ğŸ¦Œ', 'âš¡', 'ğŸ”´'], ['â¤ï¸', 'ğŸ’ƒ', 'ğŸ’¨'], ['â˜„ï¸', 'ğŸŒ©ï¸', 'ğŸŒŸ']],
    [['ğŸŒŸ', 'ğŸŒ©ï¸', 'ğŸ’ƒ'], ['âš¡', 'ğŸ”´', 'â˜„ï¸'], ['â¤ï¸', 'ğŸ¦Œ', 'ğŸ’¨']],
    [['â˜„ï¸', 'ğŸ’¨', 'â¤ï¸'], ['ğŸŒŸ', 'ğŸŒ©ï¸', 'ğŸ¦Œ'], ['âš¡', 'ğŸ’ƒ', 'ğŸ”´']],
    [['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'âš¡'], ['ğŸŒŸ', 'ğŸ”´', 'â¤ï¸']],
    [['ğŸ”´', 'â¤ï¸', 'âš¡'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸŒŸ'], ['ğŸ¦Œ', 'ğŸ’¨', 'ğŸ’ƒ']],
    [['ğŸ’ƒ', 'ğŸŒŸ', 'ğŸ¦Œ'], ['ğŸ”´', 'ğŸ’¨', 'â¤ï¸'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'âš¡']],
  ]
>;
type test_sudoku_6 = Expect<Equal<test_sudoku_6_actual, false>>;

type test_sudoku_7_actual = Validate<
  [
    [['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´']],
    [['ğŸ’ƒ', 'ğŸ¦Œ', 'â˜„ï¸'], ['â¤ï¸', 'ğŸŒ©ï¸', 'ğŸŒŸ'], ['âš¡', 'ğŸ”´', 'ğŸ’¨']],
    [['ğŸ¦Œ', 'â˜„ï¸', 'â¤ï¸'], ['ğŸŒ©ï¸', 'ğŸŒŸ', 'âš¡'], ['ğŸ”´', 'ğŸ’¨', 'ğŸ’ƒ']],
    [['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸'], ['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ']],
    [['â¤ï¸', 'ğŸŒ©ï¸', 'ğŸŒŸ'], ['âš¡', 'ğŸ”´', 'ğŸ’¨'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'â˜„ï¸']],
    [['ğŸŒ©ï¸', 'ğŸŒŸ', 'âš¡'], ['ğŸ”´', 'ğŸ’¨', 'ğŸ’ƒ'], ['ğŸ¦Œ', 'â˜„ï¸', 'â¤ï¸']],
    [['ğŸŒŸ', 'âš¡', 'ğŸ”´'], ['ğŸ’¨', 'ğŸ’ƒ', 'ğŸ¦Œ'], ['â˜„ï¸', 'â¤ï¸', 'ğŸŒ©ï¸']],
    [['âš¡', 'ğŸ”´', 'ğŸ’¨'], ['ğŸ’ƒ', 'ğŸ¦Œ', 'â˜„ï¸'], ['â¤ï¸', 'ğŸŒ©ï¸', 'ğŸŒŸ']],
    [['ğŸ”´', 'ğŸ’¨', 'ğŸ’ƒ'], ['ğŸ¦Œ', 'â˜„ï¸', 'â¤ï¸'], ['ğŸŒ©ï¸', 'ğŸŒŸ', 'âš¡']],
  ]
>;

type test_sudoku_7 = Expect<Equal<test_sudoku_7_actual, false>>;

type test_sudoku_8_actual = Validate<
  [
    //   ^?
    [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
    [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
    [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
    [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
    [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
    [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
    [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
    [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
    [['ğŸ¦Œ', 'ğŸ”´', 'ğŸ’ƒ'], ['ğŸŒ©ï¸', 'â˜„ï¸', 'ğŸ’¨'], ['âš¡', 'â¤ï¸', 'ğŸŒŸ']],
  ]
>;

type test_sudoku_8 = Expect<Equal<test_sudoku_8_actual, false>>;
